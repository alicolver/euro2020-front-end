(this.webpackJsonpworldcup=this.webpackJsonpworldcup||[]).push([[0],{151:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),i=a.n(c),o=a(34),s=a(20),l=a(8),u=a(227),d=a(206),j=a(223),h=a(209),b=a(207),m=a(225),p=a.p+"static/media/logo.165cd143.png",g=a(162),O=a(204),x=a(205),f="https://mvlag9k698.execute-api.eu-west-2.amazonaws.com/prod/",v=window.location.port?":".concat(window.location.port):"",w="".concat(window.location.protocol,"//").concat(window.location.hostname).concat(v,"/worldcup#/");a(96);function y(){var e=T(),t=k("refreshtoken");return fetch(f+"auth/check",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:e,Refresh:t},mode:"cors"}).then((function(e){return 200===e.status&&(N(e.headers.get(C)),!0)}))}function S(e){return f+e}var C="x-amzn-remapped-authorization";function N(e){e&&(document.cookie="authtoken="+e)}var k=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length){var a=t.pop().split(";").shift();return"undefined"===typeof a?"":a}return""};function T(){return k("authtoken")}var A=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},R=a(1),P=function(){return Object(R.jsxs)(g.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ","Ali Colver, Luke Ely & Simon Archer"," ",(new Date).getFullYear(),"."]})},W=a(208),D=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2),height:"3rem"},logo:{maxHeight:"10vh"}}})),F=function(e){return"/?".concat(e.toString())};function I(){var e=D(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(""),o=Object(l.a)(i,2),O=o[0],f=o[1],v=Object(n.useState)(""),w=Object(l.a)(v,2),C=w[0],N=w[1],k=Object(n.useState)(""),T=Object(l.a)(k,2),A=T[0],I=T[1],L=Object(n.useState)(""),z=Object(l.a)(L,2),E=z[0],B=z[1],q=Object(n.useState)(""),U=Object(l.a)(q,2),J=U[0],M=U[1],H=Object(n.useState)(!0),G=Object(l.a)(H,2),Z=G[0],$=G[1],V=Object(n.useState)(!1),Y=Object(l.a)(V,2),K=Y[0],Q=Y[1],X=Object(n.useState)(!1),_=Object(l.a)(X,2),ee=_[0],te=_[1],ae=new URLSearchParams(Object(s.g)().search);function ne(){if(c(!0),!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(A))return c(!1),void $(!1);E===J?fetch(S("auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:A,password:E,givenName:O,familyName:C})}).then((function(e){return e.json()})).then((function(e){c(!1),console.log(e),!1===e.success?alert("error whilst signing up :("):Q(!0)})):c(!1)}return Object(n.useEffect)((function(){y().then((function(e){e&&te(!0)}))}),[te]),ee?Object(R.jsx)(s.a,{to:"/home"}):K?Object(R.jsx)(s.a,{to:F(ae)}):Object(R.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(d.a,{}),Object(R.jsxs)("div",{className:e.paper,children:[Object(R.jsx)("img",{className:e.logo,src:p,alt:"qatar 2022 logo"}),Object(R.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(R.jsxs)("div",{className:e.form,children:[Object(R.jsxs)(b.a,{container:!0,spacing:2,children:[Object(R.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(R.jsx)(j.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:function(e){return f(e.target.value)}})}),Object(R.jsx)(b.a,{item:!0,xs:12,sm:6,children:Object(R.jsx)(j.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:function(e){return N(e.target.value)}})}),Object(R.jsx)(b.a,{item:!0,xs:12,children:Object(R.jsx)(j.a,{variant:"outlined",required:!0,fullWidth:!0,type:"email",id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:function(e){return I(e.target.value)},error:!Z})}),Object(R.jsx)(b.a,{item:!0,xs:12,children:Object(R.jsx)(j.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return B(e.target.value)}})}),Object(R.jsx)(b.a,{item:!0,xs:12,children:Object(R.jsx)(j.a,{variant:"outlined",required:!0,fullWidth:!0,name:"confirmpassword",label:"Confirm Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return M(e.target.value)},error:E!==J})})]}),Object(R.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){return ne()},children:r?Object(R.jsx)(W.a,{color:"inherit"}):"Sign Up"}),Object(R.jsx)(b.a,{container:!0,children:Object(R.jsx)(b.a,{item:!0,children:Object(R.jsx)(s.b,{render:function(e){var t=e.history;return Object(R.jsx)(h.a,{onClick:function(){t.push(F(ae))},variant:"body2",children:"Already have an account? Sign in"})}})})})]})]}),Object(R.jsx)(m.a,{mt:8,children:Object(R.jsx)(P,{})})]})}var L=a(123),z=a(221),E=(a(151),Object(O.a)({container:{paddingTop:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",color:"#9a0c34","& > div":{width:"25%",height:"75px",boxShadow:"rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px",borderRadius:"5px",textAlign:"center",verticalAlign:"middle",overflow:"hidden",whiteSpace:"nowrap"}},middle:{width:"40% !important",height:"150px !important"},score:{fontSize:"30px"},middleScore:{fontSize:"80px"},title:{color:"#AAAAAA",fontWeight:"bold"}}));function B(){var e=E();return Object(R.jsxs)(x.a,{className:e.container,children:[Object(R.jsxs)(x.a,{children:[Object(R.jsx)(g.a,{className:e.title,children:"Total"}),Object(R.jsx)(g.a,{className:e.score,children:"0"})]}),Object(R.jsxs)(x.a,{className:e.middle,children:[Object(R.jsx)(g.a,{className:e.title,children:"Today"}),Object(R.jsx)(g.a,{className:e.middleScore,children:"0"})]}),Object(R.jsxs)(x.a,{children:[Object(R.jsx)(g.a,{className:e.title,children:"Rank"}),Object(R.jsx)(g.a,{className:e.score,children:"=1"})]})]})}var q=a(120),U=a.n(q),J=a(119),M=a.n(J),H=a(210),G=a(211),Z=a(212),$=a(229),V=a(216),Y=a(217),K=a(218),Q=a(116),X=a.n(Q),_=a(224),ee=a(232),te=Object(O.a)({table:{marginBottom:"1rem",position:"relative",paddingBottom:"5px"}});function ae(){var e=te(),t=Object(s.f)(),a=Object(n.useState)([]),r=Object(l.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],h=Object(n.useState)(!1),b=Object(l.a)(h,2),m=b[0],p=b[1];Object(n.useEffect)((function(){p(!0),fetch(S("user/get-leagues"),{method:"POST",headers:{Authorization:T()}}).then((function(e){return e.ok?e.json():null})).then((function(e){p(!1),null!==e&&i(e.data.leagues)}))}),[i]);return Object(R.jsxs)(Z.a,{className:e.table,children:[Object(R.jsx)($.a,{open:d,onClose:function(){return j(!1)},autoHideDuration:2e3,children:Object(R.jsx)(_.a,{onClose:function(){return j(!1)},severity:"success",sx:{width:"300px","& .MuiAlert-message":{textAlign:"center",width:"inherit"}},children:"League link copied to clipboard!"})}),Object(R.jsxs)(V.a,{size:"small",children:[Object(R.jsx)(Y.a,{children:Object(R.jsxs)(H.a,{children:[Object(R.jsx)(G.a,{children:Object(R.jsx)("b",{children:"Rank"})}),Object(R.jsx)(G.a,{children:Object(R.jsx)("b",{children:"League"})}),Object(R.jsx)(G.a,{})]})}),Object(R.jsxs)(K.a,{children:[m&&Object(R.jsx)(H.a,{children:Object(R.jsx)(G.a,{colSpan:3,children:Object(R.jsx)(ee.a,{color:"inherit"})})}),!m&&c.map((function(e,a){return Object(R.jsxs)(H.a,{children:[Object(R.jsx)(G.a,{children:1===e.users.filter((function(t){return t.rank===e.currentRanking})).length?e.currentRanking:"="+e.currentRanking}),Object(R.jsx)(G.a,{onClick:function(){return t.push("/standings?leagueId="+e.leagueId)},style:{paddingTop:"0.7rem",paddingBottom:"0.7rem"},children:e.leagueName}),Object(R.jsx)(G.a,{children:"global"===e.leagueId?"":Object(R.jsx)(X.a,{onClick:function(){return t="".concat(w,"league/join?leagueId=").concat(e.leagueId),j(!0),void navigator.clipboard.writeText(t);var t}})})]},e.leagueId)}))]})]})]})}var ne=Object(O.a)({leagueTopDiv:{content:"",position:"relative",top:"100%",marginTop:"1.5rem",marginLeft:"2.5%",marginRight:"2.5%",left:"0",width:"95%",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",borderRadius:"2vw"},heading:{marginTop:"1.75rem",fontSize:"2rem",paddingBottom:"1rem"},leagueItem:{flex:"0 0 50%",marginRight:"5px",borderRadius:"1vw",verticalAlign:"top",fontWeight:"bold",margin:"auto"},leagueConfig:{display:"flex",textAlign:"center",width:"100%",justifyContent:"space-around",marginTop:"qrem",paddingLeft:"0vw",paddingRight:"0vw"},iconStyle:{verticalAlign:"bottom"},leagueContainer:{paddingTop:"1rem"},button:{borderRadius:"1rem",minWidth:"9rem",boxShadow:"rgba(0, 0, 0, 0.24) 0px 3px 8px",fontWeight:"bold",backgroundColor:"rgb(154,12,52)",color:"white"}});function re(){var e=ne(),t=Object(s.f)();return Object(R.jsxs)(x.a,{children:[Object(R.jsx)(g.a,{className:e.heading,children:"Leagues"}),Object(R.jsxs)(x.a,{className:e.leagueConfig,children:[Object(R.jsxs)(u.a,{className:e.button,onClick:function(){return t.push("/league/create")},children:[Object(R.jsx)(M.a,{className:e.iconStyle}),Object(R.jsx)(g.a,{style:{paddingLeft:"1rem"},children:"Create"})]}),Object(R.jsxs)(u.a,{className:e.button,onClick:function(){return t.push("/league/join")},children:[Object(R.jsx)(U.a,{className:e.iconStyle}),Object(R.jsx)(g.a,{style:{paddingLeft:"0.1rem"},children:"Join"})]})]}),Object(R.jsx)(x.a,{className:e.leagueTopDiv,children:Object(R.jsx)(x.a,{className:e.leagueContainer,children:Object(R.jsx)(ae,{})})})]})}var ce=a(219),ie=a.p+"static/media/qatar.a111b206.png",oe=a(122),se=a.n(oe),le=a(121),ue=a.n(le),de=Object(O.a)({logo:{height:"40px",display:"block",marginLeft:"auto",marginRight:"auto"},headerBar:{marginBottom:"10px",display:"flex",alignItems:"center",flexDirection:"row",padding:"0.5rem",margin:0,width:"100%",background:"linear-gradient(90deg, rgba(154,12,52,1) 0%, rgba(0,0,0,1) 100%)",zIndex:10,boxShadow:"rgba(0, 0, 0, 0.16) 0px 1px 4px"}});function je(){var e=de(),t=Object(s.f)();function a(){document.cookie="authtoken=",document.cookie="refreshtoken=",t.push("/")}return Object(R.jsx)(m.a,{children:Object(R.jsxs)(ce.a,{className:e.headerBar,children:[Object(R.jsx)(ue.a,{onClick:function(){return t.push("/home")},sx:{color:"#FFFFFF",position:"absolute",left:"15px"}}),Object(R.jsx)("img",{className:e.logo,src:ie,alt:"qatar 2022 logo",onClick:function(){return t.push("/home")}}),Object(R.jsx)(se.a,{onClick:function(){return a()},sx:{color:"#FFFFFF",position:"absolute",right:"15px"}})]})})}var he={homeScore:null,awayScore:null},be=a(13),me=a(231),pe=a(220);function ge(e){return"https://worldcupstack-teamcrestbucket54e9be2b-ns704b66xn74.s3.eu-west-2.amazonaws.com/"+e.toLowerCase().replace(" ","-")+".svg"}var Oe=Object(O.a)({team:{textAlign:"center"},teamFlag:{borderRadius:"5px",boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 8px",width:"100px"},teamName:{fontSize:"4vw"}});function xe(e){var t=Oe();return Object(R.jsxs)(m.a,{className:t.team,children:[Object(R.jsx)("img",{alt:e.name,className:t.teamFlag,src:e.flag}),Object(R.jsx)("div",{className:t.teamName,children:Object(R.jsx)(g.a,{children:e.name})})]})}var fe=Object(O.a)({match:{width:"90%",margin:"0 auto",display:"flex",justifyContent:"space-between"},game:{width:"95%",margin:"0 auto",display:"flex",justifyContent:"space-between",marginTop:"5vh",position:"relative"},teaminput:{width:"50px",height:"50px",fontSize:"40px",textAlign:"center",marginTop:"15px"},date:{fontSize:"8px",marginBottom:"2px",maringTop:"2px",verticalAlign:"center",position:"relative",color:"grey"},matchCard:{marginBottom:"15px",textAlign:"center",borderRadius:"10px"},penaltyWinner:{fontSize:"16px"},resultText:{backgroundColor:"#505e73",padding:"4px",borderRadius:"3px",color:"white"},allPredictionContainer:{marginTop:"15px",marginBottom:"10px",position:"fixed"}}),ve={success:!1,error:!1};function we(e){var t=fe(),a=Object(n.useState)({score:null==e.predictionData.homeScore?"":e.predictionData.homeScore.toString(),error:!1}),r=Object(l.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)({score:null==e.predictionData.awayScore?"":e.predictionData.awayScore.toString(),error:!1}),s=Object(l.a)(o,2),u=s[0],d=s[1],j=Object(n.useState)(ve),h=Object(l.a)(j,2),b=h[0],p=h[1];function O(){return b.success?{border:"1px solid rgb(86, 180, 89)",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05)inset, 0px 0px 8px rgba(82, 168, 100, 0.6)"}:b.error?{border:"1px solid rgb(199, 18, 49)",boxShadow:"0px 1px 3px rgba(0, 0, 0, 0.05)inset, 0px 0px 8px rgba(160, 30, 60, 0.6)"}:{}}function x(){var t,a,n=parseInt(c.score),r=parseInt(u.score),o=function(e,t){var a=!0;isNaN(e)&&(i(Object(be.a)(Object(be.a)({},c),{},{error:!0})),a=!1);isNaN(t)&&(d(Object(be.a)(Object(be.a)({},u),{},{error:!0})),a=!1);return a}(n,r);o&&(i(Object(be.a)(Object(be.a)({},c),{},{error:!1})),d(Object(be.a)(Object(be.a)({},u),{},{error:!1})),t=n,a=r,console.log(e.matchData.matchId),fetch(S("predictions/make"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:T()},body:JSON.stringify({homeScore:t,awayScore:a,matchId:e.matchData.matchId})}).then((function(e){if(e.ok)return p({success:!0,error:!1}),e.json().then((function(e){null!==e&&setTimeout((function(){p(ve)}),500)}));p({success:!1,error:!0})})))}return Object(n.useEffect)((function(){p({success:!1,error:!1})}),[i,d]),Object(R.jsxs)(pe.a,{className:t.matchCard,children:[Object(R.jsx)(m.a,{className:t.date,children:Object(R.jsx)(g.a,{children:e.matchData.matchDate+" - "+e.matchData.matchTime})}),Object(R.jsxs)(m.a,{className:t.match,children:[Object(R.jsx)(m.a,{children:Object(R.jsx)(xe,{name:e.matchData.homeTeam,flag:ge(e.matchData.homeTeam)})}),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(me.a,{className:t.teaminput,style:O(),id:"outlined-basic",value:c.score,onChange:function(e){return i(Object(be.a)(Object(be.a)({},c),{},{score:e.target.value}))},onBlur:function(){return x()},error:c.error}),Object(R.jsx)(me.a,{className:t.teaminput,id:"outlined-basic",style:O(),value:u.score,onChange:function(e){return d(Object(be.a)(Object(be.a)({},u),{},{score:e.target.value}))},onBlur:function(){return x()},error:u.error})]}),Object(R.jsx)(m.a,{children:Object(R.jsx)(xe,{name:e.matchData.awayTeam,flag:ge(e.matchData.awayTeam)})})]})]})}var ye=Object(O.a)({header:{paddingTop:"10px",paddingBottom:"20px",position:"relative"},heading:{marginTop:"1rem",paddingTop:"1rem",fontSize:"2rem",paddingBottom:"1rem"}});function Se(e){var t,a=ye(),r=Object(n.useState)(new Map),c=Object(l.a)(r,2),i=c[0],o=c[1],s=Object(n.useState)(!1),u=Object(l.a)(s,2),d=u[0],j=u[1];return Object(n.useEffect)((function(){fetch(S("predictions/fetch"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:T()},body:JSON.stringify({matchIds:e.matchData.map((function(e){return e.matchId}))})}).then((function(e){if(e.ok)return e.json().then((function(e){var t=new Map(Object.entries(e.body));o(t),j(!0)}));j(!0)}))}),[o,j,e.matchData]),e.matchData.length>0?Object(R.jsx)(m.a,{m:-2,children:Object(R.jsxs)(x.a,{className:a.header,children:[Object(R.jsx)(g.a,{className:a.heading,children:e.heading}),(t=e.matchData,t.map((function(e){var t=i.has(e.matchId)?i.get(e.matchId):he;return d?Object(R.jsx)(we,{matchData:e,predictionData:t},e.matchId):Object(R.jsx)(R.Fragment,{})})))]})}):Object(R.jsx)(R.Fragment,{})}var Ce=Object(O.a)({logo:{maxHeight:"15vw"},homepage:{position:"relative",left:0,width:"100%"}});Object(L.a)({typography:{fontFamily:["Source Sans Pro","sans-serif"].join(",")}});var Ne=function(){var e=Ce(),t=Object(n.useState)({imminentMatches:[],nextMatches:[]}),a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){fetch(S("match/get-upcoming"),{method:"GET",headers:{Authorization:T()}}).then((function(e){if(e.ok)return e.json()})).then((function(e){console.log(e.data),c(e.data)}))}),[c]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(je,{}),Object(R.jsx)(z.a,{}),Object(R.jsxs)(x.a,{className:e.homepage,maxWidth:"xs",children:[Object(R.jsx)(B,{}),r.imminentMatches.length>0?Object(R.jsx)(Se,{heading:"Next Games",matchData:r.imminentMatches}):Object(R.jsx)(R.Fragment,{}),Object(R.jsx)(re,{}),r.nextMatches.length>0?Object(R.jsx)(Se,{heading:"Upcoming Games",matchData:r.nextMatches}):Object(R.jsx)(R.Fragment,{})]})]})},ke=Object(O.a)({container:{textAlign:"center"},gradient:{background:"linear-gradient(to bottom right, rgba(255, 122, 24, 0.2), rgba(175, 0, 45, 0.2), rgba(49, 145, 151, 0.2))"},heading:{paddingTop:"2rem",fontSize:"2rem",paddingBottom:"1rem"},first:{fontWeight:"bold"},link:{color:"#A30E36",textDecoration:"underline",cursor:"pointer"},inputText:{width:"100%",textAlign:"center"},button:{top:"15px",width:"100%",background:"linear-gradient(90deg, rgba(154,12,52,1) 0%, rgba(0,0,0,1) 100%)",color:"white",fontWeight:"bold"}});function Te(){var e=ke(),t=Object(s.f)(),a=new URLSearchParams(Object(s.g)().search),r=Object(n.useState)({value:a.get("leagueId")||"",error:!1}),c=Object(l.a)(r,2),i=c[0],o=c[1];return Object(R.jsxs)(x.a,{component:"main",children:[Object(R.jsx)(d.a,{}),Object(R.jsx)(je,{}),Object(R.jsx)(z.a,{}),Object(R.jsxs)(x.a,{className:e.container,maxWidth:"xs",children:[Object(R.jsx)(g.a,{className:e.heading,children:"Join a League"}),Object(R.jsx)(g.a,{className:e.first,children:"Enter the league code provided to you by the league owner."}),Object(R.jsx)(g.a,{children:"If you want to create a league you can create one by clicking the link below:"}),Object(R.jsx)(g.a,{className:e.link,onClick:function(){return t.push("/league/create")},children:"Create a League."}),Object(R.jsx)(j.a,{id:"outlined-helperText",label:"League Id",helperText:"Get your friend to send you the league id :)",className:e.inputText,value:i.value,error:i.error,onChange:function(e){return o(Object(be.a)(Object(be.a)({},i),{},{value:e.target.value}))},color:"primary"}),Object(R.jsx)(u.a,{className:e.button,onClick:function(){fetch(S("league/join"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:T()},body:JSON.stringify({leagueId:i.value})}).then((function(e){200===e.status?t.push("/home"):o(Object(be.a)(Object(be.a)({},i),{},{error:!0}))}))},children:"Join League!"})]})]})}function Ae(){var e=ke(),t=Object(s.f)(),a=Object(n.useState)({value:"",error:!1}),r=Object(l.a)(a,2),c=r[0],i=r[1],o=Object(n.useState)(!1),d=Object(l.a)(o,2),h=d[0],b=d[1],m=Object(n.useState)(!1),p=Object(l.a)(m,2),O=p[0],f=p[1];Object(n.useEffect)((function(){}),[b,f]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(je,{}),Object(R.jsx)(z.a,{}),Object(R.jsxs)(x.a,{className:e.container,maxWidth:"xs",children:[Object(R.jsx)(g.a,{className:e.heading,children:"Create a League"}),Object(R.jsx)(g.a,{className:e.first,children:"Enter your league name to create a private league for you and friends."}),Object(R.jsx)(j.a,{id:"outlined-helperText",label:"League Name",className:e.inputText,onChange:function(e){return i(Object(be.a)(Object(be.a)({},c),{},{value:e.target.value}))},error:c.error,style:h?{boxShadow:"0 0 5px rgba(20, 219, 96, 1)",border:"1px solid rgba(20, 219, 96, 1)"}:{}}),Object(R.jsx)(u.a,{className:e.button,onClick:function(){return f(!0),void fetch(S("league/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:T()},body:JSON.stringify({leagueName:c.value})}).then((function(e){f(!1),200!==e.status?(i(Object(be.a)(Object(be.a)({},c),{},{error:!0})),alert("League Name already in use, try again")):(t.push("/home"),b(!0),setTimeout((function(){b(!1)}),2e3))}))},children:h?"SUCCESS":O?"creating...":"Create League!"})]})]})}var Re=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),height:"3rem"},logo:{maxHeight:"10vh"}}}));function Pe(e){var t,a,r,c=Object(n.useState)(!1),i=Object(l.a)(c,2),o=i[0],O=i[1],f=Object(n.useState)(!1),v=Object(l.a)(f,2),w=v[0],C=v[1],N=Re(),k=Object(n.useState)({value:(null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a||null===(r=a.email)||void 0===r?void 0:r.value)||"",error:!1}),T=Object(l.a)(k,2),A=T[0],D=T[1],F=Object(n.useState)(""),I=Object(l.a)(F,2),L=I[0],z=I[1],E=Object(n.useState)(""),B=Object(l.a)(E,2),q=B[0],U=B[1],J=Object(n.useState)(""),M=Object(l.a)(J,2),H=M[0],G=M[1],Z=Object(n.useState)(!1),$=Object(l.a)(Z,2),V=$[0],Y=$[1],K=Object(n.useState)(!1),Q=Object(l.a)(K,2),X=Q[0],_=Q[1];return Object(n.useEffect)((function(){y().then((function(e){e&&Y(!0)}))}),[Y]),V?Object(R.jsx)(s.a,{to:"/home"}):X?Object(R.jsx)(s.a,{to:"/"}):Object(R.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(d.a,{}),Object(R.jsxs)("div",{className:N.paper,children:[Object(R.jsx)("img",{className:N.logo,src:p,alt:"qatar 2022 logo"}),Object(R.jsx)(g.a,{component:"h1",variant:"h5",children:"Reset Password"}),Object(R.jsxs)("div",{className:N.form,children:[Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",type:"email",name:"email",autoComplete:"email",value:A.value,autoFocus:!0,onChange:function(e){return D(Object(be.a)(Object(be.a)({},A),{},{value:e.target.value}))},error:A.error}),Object(R.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:N.submit,onClick:function(){return O(!0),void fetch(S("auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:A.value})}).then((function(e){O(!1),200!==e.status&&alert("Error creating OTP try again later")})).catch((function(){O(!1),alert("Error creating OTP try again later")}))},children:o?Object(R.jsx)(W.a,{style:{padding:"5px"},color:"inherit"}):"Request verification code"}),Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Verification Code",type:"password",id:"password",autoComplete:"OTP",onChange:function(e){return z(e.target.value)}}),Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return U(e.target.value)}}),Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return G(e.target.value)},error:q!==H}),Object(R.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:N.submit,onClick:function(){return C(!0),void(q===H&&fetch(S("auth/confirm"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:A.value,confirmationCode:L,password:q})}).then((function(e){C(!1),200===e.status?_(!0):alert("Error resetting password")})))},children:w?Object(R.jsx)(W.a,{style:{padding:"5px"},color:"inherit"}):"Reset Password"}),Object(R.jsxs)(b.a,{container:!0,children:[Object(R.jsx)(b.a,{item:!0,children:Object(R.jsx)(s.b,{render:function(e){var t=e.history;return Object(R.jsx)(h.a,{onClick:function(){t.push("/")},variant:"body2",children:"Remembered your password? Sign in"})}})}),Object(R.jsx)(b.a,{item:!0,children:Object(R.jsx)(s.b,{render:function(e){var t=e.history;return Object(R.jsx)(h.a,{onClick:function(){t.push("/signup")},variant:"body2",children:"Don't have an account? Sign Up"})}})})]})]})]}),Object(R.jsx)(m.a,{mt:8,children:Object(R.jsx)(P,{})})]})}var We=a(222),De=function(e){var t=Object(s.f)(),a=new URLSearchParams(Object(s.g)().search);return Object(n.useEffect)((function(){y().then((function(n){if(n===e.expectAuthResult){if(e.expectAuthResult)return void t.replace("".concat(e.redirectTo));var r=new URLSearchParams(Object(be.a)(Object(be.a)({},Object.fromEntries(a)),Object.fromEntries(function(e){var t=new URLSearchParams;return t.set("redirect",e),t}(t.location.pathname))));t.replace("".concat(e.redirectTo,"?").concat(r.toString()))}}))})),Object(R.jsx)("div",{children:e.children})},Fe=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),height:"3rem"},logo:{maxHeight:"30vh"}}})),Ie=function(e){var t=e.get("redirect");return e.delete("redirect"),"".concat(t||"/home","?").concat(e.toString())};function Le(){var e=Fe(),t=Object(n.useState)(!1),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({value:"",error:!1}),o=Object(l.a)(i,2),O=o[0],f=o[1],v=Object(n.useState)({value:"",error:!1}),w=Object(l.a)(v,2),k=w[0],T=w[1],A=Object(n.useState)(!1),D=Object(l.a)(A,2),F=D[0],I=D[1],L=new URLSearchParams(Object(s.g)().search),z="/signup?".concat(L.toString());Object(n.useEffect)((function(){y().then((function(e){!0===e&&I(!0)}))}),[I]);var E=function(e){return function(){c(!0),fetch(S("auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:O.value,password:k.value})}).then((function(t){if(c(!1),307!==t.status){if(!t.ok)return T(Object(be.a)(Object(be.a)({},k),{},{error:!0})),void f(Object(be.a)(Object(be.a)({},O),{},{error:!0}));var a;I(!0),N(t.headers.get(C)),(a=t.headers.get("refresh"))&&(document.cookie="refreshtoken="+a)}else e.push({pathname:"/reset",state:{email:O}})}))}};return F?Object(R.jsx)(s.a,{to:Ie(L)}):Object(R.jsxs)(x.a,{component:"main",maxWidth:"xs",children:[Object(R.jsx)(d.a,{}),Object(R.jsxs)("div",{className:e.paper,children:[Object(R.jsx)("img",{className:e.logo,src:p,alt:"qatar 2022 logo"}),Object(R.jsx)(g.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(R.jsxs)("div",{className:e.form,children:[Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",type:"email",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){return f(Object(be.a)(Object(be.a)({},O),{},{value:e.target.value}))},error:O.error}),Object(R.jsx)(j.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){return T(Object(be.a)(Object(be.a)({},k),{},{value:e.target.value}))},error:k.error}),Object(R.jsx)(s.b,{render:function(t){var a=t.history;return Object(R.jsx)(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:E(a),children:r?Object(R.jsx)(W.a,{style:{padding:"5px"},color:"inherit"}):"Sign In"})}}),Object(R.jsxs)(b.a,{container:!0,children:[Object(R.jsx)(b.a,{item:!0,children:Object(R.jsx)(s.b,{render:function(e){var t=e.history;return Object(R.jsx)(h.a,{onClick:function(){t.replace(z)},variant:"body2",children:"Don't have an account? Sign Up"})}})}),Object(R.jsx)(b.a,{item:!0,children:Object(R.jsx)(s.b,{render:function(e){var t=e.history;return Object(R.jsx)(h.a,{onClick:function(){t.push("/reset")},variant:"body2",children:"Forgotten your password? Reset it here"})}})})]})]})]}),Object(R.jsx)(m.a,{mt:8,children:Object(R.jsx)(P,{})})]})}Object(L.a)({typography:{fontFamily:["Source Sans Pro","sans-serif"].join(",")}});var ze=Object(O.a)({heading:{marginTop:"1.75rem",paddingTop:"1rem",fontSize:"2rem",paddingBottom:"1rem"},subHeading:{fontSize:"1.5rem"},standings:{position:"relative",left:0,width:"100%"},leagueContainer:{paddingTop:"1rem"},leagueTopDiv:{content:"",position:"absolute",top:"100%",marginTop:"1.5rem",marginLeft:"2.5%",marginRight:"2.5%",left:"0",width:"95%",boxShadow:"rgba(100, 100, 111, 0.2) 0px 7px 29px 0px",borderRadius:"2vw"},table:{marginBottom:"2rem"}}),Ee=function(){var e=ze(),t=Object(n.useState)(void 0),a=Object(l.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(!1),o=Object(l.a)(i,2),u=o[0],d=o[1],j=new URLSearchParams(Object(s.g)().search).get("leagueId"),h=void 0===r?"":r.leagueName;return Object(n.useEffect)((function(){d(!0),fetch(S("league/get"),{method:"POST",headers:{Authorization:T(),"Content-Type":"application/json"},body:JSON.stringify({leagueId:j})}).then((function(e){return e.ok?e.json():null})).then((function(e){d(!1),null!==e&&c(e.data)}))}),[j]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(je,{}),Object(R.jsx)(z.a,{}),Object(R.jsxs)(x.a,{className:e.standings,maxWidth:"xs",children:[Object(R.jsxs)(x.a,{children:[Object(R.jsx)(g.a,{className:e.heading,children:"Standings"}),Object(R.jsxs)(g.a,{className:e.subHeading,children:["League - ",h]})]}),Object(R.jsx)(x.a,{className:e.leagueTopDiv,children:Object(R.jsx)(x.a,{className:e.leagueContainer,children:Object(R.jsx)(x.a,{className:e.table,children:Object(R.jsxs)(V.a,{size:"small",children:[Object(R.jsx)(Y.a,{children:Object(R.jsxs)(H.a,{children:[Object(R.jsx)(G.a,{children:Object(R.jsx)("b",{children:"Rank"})}),Object(R.jsx)(G.a,{children:Object(R.jsx)("b",{children:"Name"})}),Object(R.jsx)(G.a,{children:Object(R.jsx)("b",{children:"Score"})})]})}),Object(R.jsxs)(K.a,{children:[u&&Object(R.jsx)(H.a,{children:Object(R.jsx)(G.a,{colSpan:3,children:Object(R.jsx)(ee.a,{color:"inherit"})})}),!u&&(void 0===r?[]:r.users.sort((function(e,t){return e.rank-t.rank})).map((function(e){return Object(R.jsxs)(H.a,{children:[Object(R.jsx)(G.a,{children:1===r.users.filter((function(t){return t.rank===e.rank})).length?e.rank:"="+e.rank}),Object(R.jsxs)(G.a,{style:{paddingTop:"0.7rem",paddingBottom:"0.7rem"},children:[A(e.givenName)," ",A(e.familyName)]}),Object(R.jsx)(G.a,{children:e.totalPoints})]},e.userId)})))]})]})})})})]})]})},Be=Object(L.a)({palette:{primary:{light:"#f5938c",main:"#9a0c34",dark:"#840033",contrastText:"#fff"},secondary:{light:"#ff7961",main:"#f44336",dark:"#ba000d",contrastText:"#000"}},typography:{fontFamily:["Source Sans Pro","sans-serif"].join(",")}});function qe(){return Object(R.jsx)(We.a,{theme:Be,children:Object(R.jsxs)(o.a,{children:[Object(R.jsx)(s.b,{path:"/",exact:!0,children:Object(R.jsx)(De,{expectAuthResult:!0,redirectTo:"/home",children:Object(R.jsx)(Le,{})})}),Object(R.jsx)(s.b,{path:"/signup",exact:!0,component:I}),Object(R.jsx)(s.b,{path:"/reset",exact:!0,component:Pe}),Object(R.jsx)(s.b,{path:"/home",exact:!0,children:Object(R.jsx)(De,{expectAuthResult:!1,redirectTo:"/",children:Object(R.jsx)(Ne,{})})}),Object(R.jsx)(s.b,{path:"/league/join",exact:!0,children:Object(R.jsx)(De,{expectAuthResult:!1,redirectTo:"/",children:Object(R.jsx)(Te,{})})}),Object(R.jsx)(s.b,{path:"/league/create",exact:!0,children:Object(R.jsx)(De,{expectAuthResult:!1,redirectTo:"/",children:Object(R.jsx)(Ae,{})})}),Object(R.jsx)(s.b,{path:"/standings",exact:!0,children:Object(R.jsx)(De,{expectAuthResult:!1,redirectTo:"/",children:Object(R.jsx)(Ee,{})})})]})})}var Ue=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,235)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))},Je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a(158);i.a.render(Object(R.jsx)(r.a.StrictMode,{children:Object(R.jsx)(qe,{})}),document.getElementById("root")),Ue(),function(e){if("serviceWorker"in navigator){if(new URL("/worldcup",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/worldcup","/service-worker.js");Je?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Me(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Me(t,e)}))}}()}},[[159,1,2]]]);
//# sourceMappingURL=main.c4bde523.chunk.js.map